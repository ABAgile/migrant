class <%= @activity.camelize.gsub(/\s/, '') %> < ActiveRecord::Migration
  def self.up
  <% @added_columns.each do |field, options| %>
    add_column :<%= @table_name %>, :<%= field %>, :<%= options.delete(:type) %><%= (options.blank?)? '': ", "+options.inspect[1..-2] %>
  <% end -%>
  <% @changed_columns.each do |field, options, old_options| %>
    change_column :<%= @table_name %>, :<%= field %>, :<%= options.delete(:type) %><%= (options.blank?)? '': ", "+options.inspect[1..-2] %>
  <% end -%>
  <% @indexes.each do |index| %>
    add_index :<%= @table_name %>, <%= index.inspect %>
  <% end -%>
  end
  
  def self.down
  <% @added_columns.each do |field, options| %>
    remove_column :<%= @table_name %>, :<%= field %>
  <% end -%>
  <% @changed_columns.each do |field, options, old_options| %>
    change_column :<%= @table_name %>, :<%= field %>, :<%= old_options.delete(:type) %><%= (old_options.blank?)? '': ", "+old_options.inspect[1..-2] %>
  <% end -%>
  end
end
